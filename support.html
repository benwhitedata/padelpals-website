<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support - Padel Pals</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="Icon.png" type="image/png">
    <!-- Load Supabase JS and config loader -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config-loader.js"></script>
    <style>
        :root {
            --gold: #d4af37;
            --dark-blue: #1a2238;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            line-height: 1.6;
        }
        .navbar {
            background-color: var(--dark-blue);
        }
        .navbar-brand, .nav-link {
            color: white;
        }
        .nav-link:hover {
            color: var(--gold);
        }
        .nav-link.active {
            color: var(--gold) !important;
        }
        .page-header {
            background: linear-gradient(135deg, var(--dark-blue) 0%, #2a3990 100%);
            color: white;
            padding: 60px 0;
            text-align: center;
        }
        .contact-card {
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        .contact-icon {
            font-size: 2.5rem;
            color: var(--gold);
            margin-bottom: 20px;
        }
        .footer {
            background-color: var(--dark-blue);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
        .footer a {
            color: var(--gold);
            text-decoration: none;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .accordion-button:not(.collapsed) {
            background-color: var(--gold);
            color: var(--dark-blue);
        }
        .accordion-button:focus {
            box-shadow: 0 0 0 0.25rem rgba(212, 175, 55, 0.25);
        }
        .navbar-nav {
            margin-left: auto;
        }
    </style>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L426ZMNKFK"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-L426ZMNKFK');
    </script>
    <!-- End Google Analytics -->
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="images/Icon.png" alt="Padel Pals Logo" style="height: 40px; margin-right: 10px;">
                Padel Pals
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="support.html">Support</a></li>
                    <li class="nav-item"><a class="nav-link" href="privacy.html">Privacy Policy</a></li>
                    <li class="nav-item"><a class="nav-link" href="boxleague.html">Box League</a></li>
                    <li class="nav-item"><a class="nav-link" href="guide.html">App Guide</a></li>
                    <li class="nav-item"><a class="nav-link" href="dashboard.html" id="navDashboard" style="display: none;">Dashboard</a></li>
                    <li class="nav-item"><a class="nav-link" href="auth.html" id="navSignIn">Sign In</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="page-header">
        <div class="container">
            <h1>Support & Contact</h1>
            <p>We're here to help with any questions about Padel Pals</p>
        </div>
    </section>

    <section class="contact-info py-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="contact-card">
                        <div class="contact-icon">ðŸ“§</div>
                        <h3>Email Support</h3>
                        <p>For general inquiries and support requests:</p>
                        <p>We aim to respond to all inquiries within 24-48 hours.</p>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="contact-card">
                        <div class="contact-icon">ðŸ“±</div>
                        <h3>App Feedback</h3>
                        <p>Have suggestions or found a bug? We'd love to hear from you:</p>
                        <p>Your feedback helps us improve Padel Pals for everyone!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="faq bg-light py-5">
        <div class="container">
            <h2 class="text-center mb-5">Frequently Asked Questions</h2>
            
            <div class="accordion" id="faqAccordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                            How do I set up an Americano tournament?
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>Setting up an Americano tournament in Padel Pals is easy:</p>
                            <ol>
                                <li>Tap on the "New Tournament" button on the home screen</li>
                                <li>Select "Americano" as the tournament type</li>
                                <li>Enter the player names (currently fixed at 8 players)</li>
                                <li>Configure the number of courts and points per match</li>
                                <li>Tap "Start Tournament" to begin</li>
                            </ol>
                            <p>The app will automatically generate all fixtures and handle the scoring for you!</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Can I edit match results after submission?
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>Yes, match results can be directly edited by the player who submitted them. Simply navigate to the match in the app and make the necessary changes.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            How is data backed up and synchronized?
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>Padel Pals uses Supabase for secure cloud storage of your match data. When you sign in with your Apple ID, all your match results are automatically synchronized across your devices.</p>
                            <p>Your data is backed up in real-time, so you never have to worry about losing your match history or player statistics.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                            Is there a limit to how many matches I can record?
                        </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>There is no practical limit to the number of matches you can record in Padel Pals. Our database is designed to handle large volumes of match data efficiently.</p>
                            <p>You can record as many matches as you play, and the app will maintain detailed statistics for all players across your entire match history.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFive">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                            How do I log out or switch accounts?
                        </button>
                    </h2>
                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>To log out of Padel Pals:</p>
                            <ol>
                                <li>Click the logout icon on the top right corner of the home screen</li>
                            </ol>
                            <p>After signing out, you can sign back in with a different Apple ID if needed.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingSix">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSix" aria-expanded="false" aria-controls="collapseSix">
                            How do I view my Box League standings?
                        </button>
                    </h2>
                    <div id="collapseSix" class="accordion-collapse collapse" aria-labelledby="headingSix" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>To view your Box League standings, open the Padel Pals app and navigate to the Box League section. Select your league to view the current standings and match results.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingSeven">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven">
                            How do I submit Box League match results?
                        </button>
                    </h2>
                    <div id="collapseSeven" class="accordion-collapse collapse" aria-labelledby="headingSeven" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>To submit Box League match results, go to the Box League section in the app, select the match you wish to submit results for, enter the set scores, and click Submit Result.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingEight">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEight" aria-expanded="false" aria-controls="collapseEight">
                            What should I do if my opponent is unresponsive?
                        </button>
                    </h2>
                    <div id="collapseEight" class="accordion-collapse collapse" aria-labelledby="headingEight" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>If your opponent is unresponsive, try contacting them through the WhatsApp group or other communication methods. If there is no response for 7+ days, contact the league admin for assistance.</p>
                        </div>
                    </div>
                </div>
                
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingNine">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseNine" aria-expanded="false" aria-controls="collapseNine">
                            How do I delete my account and matches?
                        </button>
                    </h2>
                    <div id="collapseNine" class="accordion-collapse collapse" aria-labelledby="headingNine" data-bs-parent="#faqAccordion">
                        <div class="accordion-body">
                            <p>To delete your account and matches, navigate to the Player Profile section in the app. There, you will find a "Delete Account" option. Follow the prompts to permanently delete your account and all associated match data.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Padel Pals. All rights reserved.</p>
            <p>
                <a href="support.html">Support</a> |
                <a href="privacy.html">Privacy Policy</a> |
                <a href="boxleague.html">Box League Rules</a> |
                <a href="guide.html">App Guide</a> |
                <a href="dashboard.html" id="footerDashboard" style="display: none;">Dashboard</a> |
                <a href="auth.html" id="footerSignIn">Sign In</a>
            </p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // Initialize Supabase client when config is loaded
        let supabase;
        
        // Listen for the configLoaded event from config-loader.js
        document.addEventListener('configLoaded', function() {
            console.log('Configuration loaded successfully');
            
            // Initialize Supabase with loaded configuration
            try {
                supabase = window.supabase.createClient(
                    window.config.supabaseUrl,
                    window.config.supabaseKey
                );
                
                if (supabase && supabase.auth) {
                    checkAuthStatus();
                }
            } catch (error) {
                console.error('Failed to initialize Supabase client:', error);
            }
        });
        
        // Check authentication status and update menu links
        async function checkAuthStatus() {
            try {
                const { data: { session }, error } = await supabase.auth.getSession();
                
                if (error) {
                    console.error('Error checking auth status:', error);
                    return;
                }
                
                // Get all the sign in links (nav and footer)
                const navSignInLink = document.querySelector('#navSignIn');
                const footerSignInLink = document.querySelector('#footerSignIn');
                const navDashboardLink = document.querySelector('#navDashboard');
                const footerDashboardLink = document.querySelector('#footerDashboard');
                
                if (session) {
                    // User is signed in, change links to "Sign Out"
                    if (navSignInLink) {
                        navSignInLink.textContent = 'Sign Out';
                        navSignInLink.addEventListener('click', handleSignOut);
                        navSignInLink.href = '#'; // Prevent navigation
                    }
                    
                    if (footerSignInLink) {
                        footerSignInLink.textContent = 'Sign Out';
                        footerSignInLink.addEventListener('click', handleSignOut);
                        footerSignInLink.href = '#'; // Prevent navigation
                    }
                    
                    // Show Dashboard links
                    if (navDashboardLink) {
                        navDashboardLink.style.display = '';
                    }
                    
                    if (footerDashboardLink) {
                        footerDashboardLink.style.display = '';
                    }
                    
                    console.log('User is signed in:', session.user.id);
                } else {
                    // User is not signed in, ensure links are "Sign In"
                    if (navSignInLink) {
                        navSignInLink.textContent = 'Sign In';
                        navSignInLink.href = 'auth.html';
                    }
                    
                    if (footerSignInLink) {
                        footerSignInLink.textContent = 'Sign In';
                        footerSignInLink.href = 'auth.html';
                    }
                    
                    // Hide Dashboard links
                    if (navDashboardLink) {
                        navDashboardLink.style.display = 'none';
                    }
                    
                    if (footerDashboardLink) {
                        footerDashboardLink.style.display = 'none';
                    }
                    
                    console.log('User is not signed in');
                }
            } catch (e) {
                console.error('Error in checkAuthStatus:', e);
            }
        }
        
        // Handle sign out
        async function handleSignOut(e) {
            e.preventDefault();
            
            try {
                const { error } = await supabase.auth.signOut();
                if (error) {
                    console.error('Error signing out:', error);
                } else {
                    console.log('User signed out successfully');
                    // Reload page after sign out
                    window.location.reload();
                }
            } catch (e) {
                console.error('Exception during sign out:', e);
            }
        }
    </script>
</body>
</html>
