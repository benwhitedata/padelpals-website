<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Direct Apple Sign-In Test</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        button {
            background-color: black;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
            margin: 20px 0;
        }
        pre {
            background: #f5f5f5;
            padding: 10px;
            overflow: auto;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>Apple Sign-In Troubleshooting</h1>
    
    <h2>Current Configuration</h2>
    <p>We're troubleshooting an issue where the Apple Sign-In isn't using the correct client ID.</p>
    
    <h2>Direct Sign-In Test</h2>
    <p>Click the button below to try signing in with a direct URL using the correct client ID:</p>
    
    <button id="directSignIn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
            <path d="M17.05 20.28c-.98.95-2.05.88-3.08.41-1.09-.47-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.41C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.19 2.31-.89 3.51-.84 1.54.07 2.7.61 3.44 1.57-3.14 1.88-2.29 5.13.22 6.41-.65 1.29-1.44 2.58-2.25 4.03zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"/>
        </svg>
        Sign in with Apple (Direct)
    </button>
    
    <div id="result"></div>
    
    <script>
        document.getElementById('directSignIn').addEventListener('click', function() {
            // Create a state parameter similar to what Supabase would create
            const state = JSON.stringify({
                site_url: window.location.origin,
                timestamp: new Date().getTime()
            });
            
            // Create the direct URL with the correct client ID
            const directUrl = `https://appleid.apple.com/auth/authorize?client_id=com.playpadelpals.padelpals362.signin&redirect_uri=https%3A%2F%2Fpeaphqbxdmknxzsfdxuh.supabase.co%2Fauth%2Fv1%2Fcallback&response_mode=form_post&response_type=code&scope=email+name&state=${encodeURIComponent(state)}`;
            
            // Display the URL in the page
            document.getElementById('result').innerHTML = `
                <p>Redirecting to:</p>
                <pre>${directUrl}</pre>
            `;
            
            // Redirect after a slight delay so the user can see where they're going
            setTimeout(() => {
                window.location.href = directUrl;
            }, 2000);
        });
    </script>
</body>
</html> 